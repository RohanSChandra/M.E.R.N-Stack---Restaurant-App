(this["webpackJsonp02-exercise-api-request-in-react"]=this["webpackJsonp02-exercise-api-request-in-react"]||[]).push([[0],{112:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(20),a=n.n(s),i=(n(49),n(50),n(5)),o=n(10),j=n(2),l=Object(o.c)((function(){return Object(j.jsx)(i.a,{})}),{onRedirecting:function(){return Object(j.jsx)("p",{children:"Loading"})}}),u=(n(59),n(7)),b=n.p+"static/media/logo.68074af1.png",d=(n(60),function(){var e=Object(o.b)(),t=e.loginWithRedirect,n=e.logout,r=e.isAuthenticated;return e.isLoading?Object(j.jsx)("p",{children:"Loading login details..."}):r?Object(j.jsx)("button",{className:"btn-login",onClick:function(){return n({returnTo:window.location.origin})},children:"Log Out"}):Object(j.jsx)("button",{className:"btn-login",onClick:function(){return t()},children:"Log In"})}),O=function(){return Object(j.jsx)("header",{className:"header",children:Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(u.b,{to:"/",className:"header-title",children:Object(j.jsx)("img",{src:b,alt:"",width:"300"})}),Object(j.jsxs)("ul",{className:"nav",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(u.b,{to:"/",className:"nav-link",children:"Restaurants"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(u.b,{to:"/reservations",className:"nav-link",children:"My reservations"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(d,{})})]})]})})},h=n(9),m=n.n(h),x=n(12),f=n(6),v=n(116),p=function(e){return Object(v.default)(new Date(e),"h:mmaaa EEE d LLL, yyyy")},g=(n(62),function(){var e=Object(i.h)().id,t=Object(r.useState)({}),n=Object(f.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)(!0),l=Object(f.a)(a,2),b=l[0],d=l[1],O=Object(o.b)().getAccessTokenSilently;return Object(r.useEffect)((function(){(function(){var t=Object(x.a)(m.a.mark((function t(){var n,r,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:return n=t.sent,r="http://localhost:5001/reservations/".concat(e),t.next=6,fetch(r,{headers:{Authorization:"Bearer ".concat(n)}});case 6:return c=t.sent,t.next=9,c.json();case 9:a=t.sent,s(a),d(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,O]),b?Object(j.jsx)("p",{children:"Loading..."}):c.error?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{className:"error-message",children:"Sorry! We can't find that reservation"}),Object(j.jsx)(u.b,{to:"/reservations",className:"reservation-only-button",children:"\u2190 Back to reservations"})]}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:c.restaurantName}),Object(j.jsx)("p",{children:p(c.date)}),Object(j.jsxs)("p",{className:"reservation-only-party-size",children:[Object(j.jsx)("strong",{children:" Party Size: "})," ",c.partySize]}),Object(j.jsx)(u.b,{to:"/reservations",className:"reservation-only-button",children:"\u2190 Back to reservations"})]})},c.id)})}),N=(n(63),function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],s=Object(o.b)().getAccessTokenSilently;return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return t=e.sent,e.next=5,fetch("http://localhost:5001/reservations",{headers:{Authorization:"Bearer ".concat(t)}});case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,c(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),0===n.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Upcoming reservations"}),Object(j.jsx)("p",{children:"You don't have any reservations."}),Object(j.jsx)(u.b,{to:"/",className:"reservation-list-view-details",children:"View the restaurants"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Upcoming reservations"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsxs)("li",{className:"reservation-list-grid-container",children:[Object(j.jsx)("p",{className:"reservation-list-name",children:e.restaurantName}),Object(j.jsx)("p",{className:"reservation-list-date",children:p(e.date)}),Object(j.jsx)(u.b,{to:"/reservations/".concat(e.id),className:"reservation-list-view-details",children:"View details \u2192"})]},e.id)}))})]})}),S=(n(64),function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5001/restaurants");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{children:"Restaurants"}),Object(j.jsx)("ul",{children:n.map((function(e){return Object(j.jsxs)("li",{className:"restaurant-list-grid-container",children:[Object(j.jsx)("img",{src:e.image,className:"restaurant-list-image",alt:"pictureoffood"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{className:"restaurant-list-name",children:e.name}),Object(j.jsx)("p",{className:"restaurant-list-description",children:e.description}),Object(j.jsx)(u.b,{className:"restaurant-list-reserve-now",to:"/restaurants/".concat(e.id),children:"Reserve Now \u2192"})]})]},e.id)}))})]})}),T=n(40),_=n.n(T),E=(n(65),n(66),function(e){var t=e.restaurantName,n=Object(r.useState)(new Date),c=Object(f.a)(n,2),s=c[0],a=c[1],l=Object(r.useState)(""),b=Object(f.a)(l,2),d=b[0],O=b[1],h=Object(i.g)(),v=Object(r.useState)(!1),p=Object(f.a)(v,2),g=p[0],N=p[1],S=Object(r.useState)(!1),T=Object(f.a)(S,2),E=T[0],w=T[1],y=Object(r.useState)(!1),C=Object(f.a)(y,2),A=C[0],R=C[1],D=Object(o.b)().getAccessTokenSilently,F=function(){var e=Object(x.a)(m.a.mark((function e(n){var r,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,D();case 3:return r=e.sent,N(!0),c={date:s,partySize:d,restaurantName:t},e.next=8,fetch("http://localhost:5001/reservations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(c)});case 8:(a=e.sent).ok?(N(!1),h("/reservations")):(w(!0),R(a.status));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return E?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{children:["Error creating a reservation (error status ",A,")"]}),Object(j.jsx)(u.b,{to:"/",className:"button",children:"Return to Restaurants"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h2",{className:"reserve-restaurant",children:["Reserve ",t]}),Object(j.jsxs)("form",{onSubmit:F,children:[Object(j.jsx)("label",{className:"form-label",htmlFor:"numberofguests",children:"Number of guests"}),Object(j.jsx)("input",{type:"number",id:"numberofguests",min:"0",className:"form-input",required:!0,value:d,onChange:function(e){return O(e.target.value)}}),Object(j.jsx)("label",{className:"form-label",htmlFor:"date",children:"Date"}),Object(j.jsx)(_.a,{className:"form-input",id:"date",selected:s,onChange:function(e){return a(e)},minDate:new Date,showTimeSelect:!0,dateFormat:"Pp"}),Object(j.jsx)("button",{className:"create-reservations-submit-btn",disabled:g,children:"Submit"})]})]})}),w=(n(112),function(){var e=Object(i.h)().id,t=Object(r.useState)({}),n=Object(f.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)(!0),o=Object(f.a)(a,2),l=o[0],u=o[1];return Object(r.useEffect)((function(){(function(){var t=Object(x.a)(m.a.mark((function t(){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="http://localhost:5001/restaurants/".concat(e),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,s(c),u(!1);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),l?Object(j.jsx)("p",{children:"Loading..."}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"restaurant-grid-container",children:[Object(j.jsx)("img",{src:c.image,className:"restaurant-image",alt:"pictureoffood"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{className:"restaurant-name",children:c.name}),Object(j.jsx)("p",{className:"restaurant-description",children:c.description})]})]},c.id),Object(j.jsx)(E,{restaurantName:c.name})]})}),y=function(){return Object(o.b)().isLoading?Object(j.jsx)("p",{children:"Loading..."}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(O,{}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/restaurants/:id",element:Object(j.jsx)(l,{}),children:Object(j.jsx)(i.b,{path:"/restaurants/:id",element:Object(j.jsx)(w,{})})}),Object(j.jsx)(i.b,{path:"/reservations/:id",element:Object(j.jsx)(l,{}),children:Object(j.jsx)(i.b,{path:"/reservations/:id",element:Object(j.jsx)(g,{})})}),Object(j.jsx)(i.b,{path:"/reservations",element:Object(j.jsx)(l,{}),children:Object(j.jsx)(i.b,{path:"/reservations",element:Object(j.jsx)(N,{})})}),Object(j.jsx)(i.b,{path:"/",element:Object(j.jsx)(S,{})})]})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},A=function(e){var t=e.children,n=Object(i.g)(),r=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_DOMAIN,c=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_CLIENT_ID,s=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_AUDIENCE;return Object(j.jsx)(o.a,{domain:r,clientId:c,redirectUri:window.location.origin,onRedirectCallback:function(e){n((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},audience:s,children:t})};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(u.a,{children:Object(j.jsx)(A,{children:Object(j.jsx)(y,{})})})}),document.getElementById("root")),C()},49:function(e,t,n){},50:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.b7b7bf12.chunk.js.map