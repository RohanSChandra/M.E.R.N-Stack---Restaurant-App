{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./ReservationList.css\";import React,{useState,useEffect}from\"react\";import{useAuth0}from\"@auth0/auth0-react\";import{formatDate}from\"../utils/formatDate\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReservationList=function ReservationList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),reservationList=_useState2[0],setReservationList=_useState2[1];var _useAuth=useAuth0(),getAccessTokenSilently=_useAuth.getAccessTokenSilently;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var accessToken,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAccessTokenSilently();case 2:accessToken=_context.sent;_context.next=5;return fetch(\"http://localhost:5001/reservations\",{headers:{Authorization:\"Bearer \".concat(accessToken)}});case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;setReservationList(data);case 10:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[getAccessTokenSilently]);if(reservationList.length===0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upcoming reservations\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You don't have any reservations.\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"reservation-list-view-details\",children:\"View the restaurants\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upcoming reservations\"}),/*#__PURE__*/_jsx(\"ul\",{children:reservationList.map(function(reservation){return/*#__PURE__*/_jsxs(\"li\",{className:\"reservation-list-grid-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"reservation-list-name\",children:reservation.restaurantName}),/*#__PURE__*/_jsx(\"p\",{className:\"reservation-list-date\",children:formatDate(reservation.date)}),/*#__PURE__*/_jsx(Link,{to:\"/reservations/\".concat(reservation.id),className:\"reservation-list-view-details\",children:\"View details \\u2192\"})]},reservation.id);})})]});};export default ReservationList;","map":{"version":3,"sources":["/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/src/components/ReservationList.js"],"names":["React","useState","useEffect","useAuth0","formatDate","Link","ReservationList","reservationList","setReservationList","getAccessTokenSilently","fetchData","accessToken","fetch","headers","Authorization","response","json","data","length","map","reservation","restaurantName","date","id"],"mappings":"2oBAAA,MAAO,uBAAP,CACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,OAASC,IAAT,KAAqB,kBAArB,C,6IAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,cAA8CL,QAAQ,CAAC,EAAD,CAAtD,wCAAOM,eAAP,eAAwBC,kBAAxB,eACA,aAAmCL,QAAQ,EAA3C,CAAQM,sBAAR,UAAQA,sBAAR,CAEAP,SAAS,CAAC,UAAM,CACd,GAAMQ,CAAAA,SAAS,0FAAG,uLACUD,CAAAA,sBAAsB,EADhC,QACVE,WADU,qCAEOC,CAAAA,KAAK,sCAAuC,CACjEC,OAAO,CAAE,CACPC,aAAa,kBAAYH,WAAZ,CADN,CADwD,CAAvC,CAFZ,QAEVI,QAFU,qCAOGA,CAAAA,QAAQ,CAACC,IAAT,EAPH,QAOVC,IAPU,eAQhBT,kBAAkB,CAACS,IAAD,CAAlB,CARgB,uDAAH,kBAATP,CAAAA,SAAS,0CAAf,CAUAA,SAAS,GACV,CAZQ,CAYN,CAACD,sBAAD,CAZM,CAAT,CAcA,GAAIF,eAAe,CAACW,MAAhB,GAA2B,CAA/B,CAAkC,CAChC,mBACE,wCACE,6CADF,cAEE,uDAFF,cAGE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,+BAAvB,kCAHF,GADF,CASD,CAED,mBACE,wCACE,6CADF,cAEE,oBACGX,eAAe,CAACY,GAAhB,CAAoB,SAACC,WAAD,CAAiB,CACpC,mBACE,YAEE,SAAS,CAAC,iCAFZ,wBAIE,UAAG,SAAS,CAAC,uBAAb,UACGA,WAAW,CAACC,cADf,EAJF,cAQE,UAAG,SAAS,CAAC,uBAAb,UACGjB,UAAU,CAACgB,WAAW,CAACE,IAAb,CADb,EARF,cAWE,KAAC,IAAD,EACE,EAAE,yBAAmBF,WAAW,CAACG,EAA/B,CADJ,CAEE,SAAS,CAAC,+BAFZ,iCAXF,GACOH,WAAW,CAACG,EADnB,CADF,CAoBD,CArBA,CADH,EAFF,GADF,CA6BD,CA3DD,CA6DA,cAAejB,CAAAA,eAAf","sourcesContent":["import \"./ReservationList.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { formatDate } from \"../utils/formatDate\";\nimport { Link } from \"react-router-dom\";\n\nconst ReservationList = () => {\n  const [reservationList, setReservationList] = useState([]);\n  const { getAccessTokenSilently } = useAuth0();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const accessToken = await getAccessTokenSilently();\n      const response = await fetch(`http://localhost:5001/reservations`, {\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n        },\n      });\n      const data = await response.json();\n      setReservationList(data);\n    };\n    fetchData();\n  }, [getAccessTokenSilently]);\n\n  if (reservationList.length === 0) {\n    return (\n      <>\n        <h1>Upcoming reservations</h1>\n        <p>You don't have any reservations.</p>\n        <Link to=\"/\" className=\"reservation-list-view-details\">\n          View the restaurants\n        </Link>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <h1>Upcoming reservations</h1>\n      <ul>\n        {reservationList.map((reservation) => {\n          return (\n            <li\n              key={reservation.id}\n              className=\"reservation-list-grid-container\"\n            >\n              <p className=\"reservation-list-name\">\n                {reservation.restaurantName}\n              </p>\n\n              <p className=\"reservation-list-date\">\n                {formatDate(reservation.date)}\n              </p>\n              <Link\n                to={`/reservations/${reservation.id}`}\n                className=\"reservation-list-view-details\"\n              >\n                View details &rarr;\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    </>\n  );\n};\n\nexport default ReservationList;\n"]},"metadata":{},"sourceType":"module"}