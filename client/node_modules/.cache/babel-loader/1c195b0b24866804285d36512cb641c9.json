{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import DatePicker from\"react-datepicker\";import{useAuth0}from\"@auth0/auth0-react\";import\"react-datepicker/dist/react-datepicker.css\";import\"./CreateReservation.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CreateReservation=function CreateReservation(_ref){var restaurantName=_ref.restaurantName;var _useState=useState(new Date()),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),partySize=_useState4[0],setpartySize=_useState4[1];var navigate=useNavigate();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isError=_useState8[0],setIsError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),errorStatus=_useState10[0],setErrorStatus=_useState10[1];var _useAuth=useAuth0(),getAccessTokenSilently=_useAuth.getAccessTokenSilently;var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var accessToken,formPage,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return getAccessTokenSilently();case 3:accessToken=_context.sent;setIsLoading(true);formPage={date:date,partySize:partySize,restaurantName:restaurantName};_context.next=8;return fetch(\"http://localhost:5001/reservations\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(accessToken)},body:JSON.stringify(formPage)});case 8:response=_context.sent;if(!response.ok){setIsError(true);setErrorStatus(response.status);}else{setIsLoading(false);navigate(\"/reservations\");}case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();if(isError){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Error creating a reservation (error status \",errorStatus,\")\"]}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"button\",children:\"Return to Restaurants\"})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"reserve-restaurant\",children:[\"Reserve \",restaurantName]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"numberofguests\",children:\"Number of guests\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"numberofguests\",min:\"0\",className:\"form-input\",required:true,value:partySize,onChange:function onChange(e){return setpartySize(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(DatePicker,{className:\"form-input\",id:\"date\",selected:date,onChange:function onChange(date){return setDate(date);},minDate:new Date(),showTimeSelect:true,dateFormat:\"Pp\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-reservations-submit-btn\",disabled:isLoading,children:\"Submit\"})]})]});};export default CreateReservation;","map":{"version":3,"sources":["/Users/rohan/Code/02-project---reservationizr-app-part-2---manage-reservations-RohanSChandra/client/src/components/CreateReservation.js"],"names":["React","useState","useNavigate","Link","DatePicker","useAuth0","CreateReservation","restaurantName","Date","date","setDate","partySize","setpartySize","navigate","isLoading","setIsLoading","isError","setIsError","errorStatus","setErrorStatus","getAccessTokenSilently","handleSubmit","e","preventDefault","accessToken","formPage","fetch","method","headers","Authorization","body","JSON","stringify","response","ok","status","target","value"],"mappings":"2oBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,CAAsBC,IAAtB,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,MAAO,4CAAP,CACA,MAAO,yBAAP,C,6IAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,MAAwB,IAArBC,CAAAA,cAAqB,MAArBA,cAAqB,CAChD,cAAwBN,QAAQ,CAAC,GAAIO,CAAAA,IAAJ,EAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eACA,eAAkCT,QAAQ,CAAC,EAAD,CAA1C,yCAAOU,SAAP,eAAkBC,YAAlB,eACA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,eAAkCD,QAAQ,CAAC,KAAD,CAA1C,yCAAOa,SAAP,eAAkBC,YAAlB,eACA,eAA8Bd,QAAQ,CAAC,KAAD,CAAtC,yCAAOe,OAAP,eAAgBC,UAAhB,eACA,eAAsChB,QAAQ,CAAC,KAAD,CAA9C,0CAAOiB,WAAP,gBAAoBC,cAApB,gBACA,aAAmCd,QAAQ,EAA3C,CAAQe,sBAAR,UAAQA,sBAAR,CAEA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOC,CAAP,oJACnBA,CAAC,CAACC,cAAF,GADmB,sBAEOH,CAAAA,sBAAsB,EAF7B,QAEbI,WAFa,eAGnBT,YAAY,CAAC,IAAD,CAAZ,CAEMU,QALa,CAKF,CAAEhB,IAAI,CAAJA,IAAF,CAAQE,SAAS,CAATA,SAAR,CAAmBJ,cAAc,CAAdA,cAAnB,CALE,uBAOImB,CAAAA,KAAK,CAAC,oCAAD,CAAuC,CACjEC,MAAM,CAAE,MADyD,CAEjEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYL,WAAZ,CAFN,CAFwD,CAMjEM,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeP,QAAf,CAN2D,CAAvC,CAPT,QAObQ,QAPa,eAenB,GAAI,CAACA,QAAQ,CAACC,EAAd,CAAkB,CAChBjB,UAAU,CAAC,IAAD,CAAV,CACAE,cAAc,CAACc,QAAQ,CAACE,MAAV,CAAd,CACD,CAHD,IAGO,CACLpB,YAAY,CAAC,KAAD,CAAZ,CACAF,QAAQ,CAAC,eAAD,CAAR,CACD,CArBkB,uDAAH,kBAAZQ,CAAAA,YAAY,6CAAlB,CAuBA,GAAIL,OAAJ,CAAa,CACX,mBACE,wCACE,mEAA+CE,WAA/C,OADF,cAEE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,QAAvB,mCAFF,GADF,CAQD,CAED,mBACE,wCACE,YAAI,SAAS,CAAC,oBAAd,sBAA4CX,cAA5C,GADF,cAEE,cAAM,QAAQ,CAAEc,YAAhB,wBACE,cAAO,SAAS,CAAC,YAAjB,CAA8B,OAAO,CAAC,gBAAtC,8BADF,cAIE,cACE,IAAI,CAAC,QADP,CAEE,EAAE,CAAC,gBAFL,CAGE,GAAG,CAAC,GAHN,CAIE,SAAS,CAAC,YAJZ,CAKE,QAAQ,KALV,CAME,KAAK,CAAEV,SANT,CAOE,QAAQ,CAAE,kBAACW,CAAD,QAAOV,CAAAA,YAAY,CAACU,CAAC,CAACc,MAAF,CAASC,KAAV,CAAnB,EAPZ,EAJF,cAaE,cAAO,SAAS,CAAC,YAAjB,CAA8B,OAAO,CAAC,MAAtC,kBAbF,cAgBE,KAAC,UAAD,EACE,SAAS,CAAC,YADZ,CAEE,EAAE,CAAC,MAFL,CAGE,QAAQ,CAAE5B,IAHZ,CAIE,QAAQ,CAAE,kBAACA,IAAD,QAAUC,CAAAA,OAAO,CAACD,IAAD,CAAjB,EAJZ,CAKE,OAAO,CAAE,GAAID,CAAAA,IAAJ,EALX,CAME,cAAc,KANhB,CAOE,UAAU,CAAC,IAPb,EAhBF,cAyBE,eAAQ,SAAS,CAAC,gCAAlB,CAAmD,QAAQ,CAAEM,SAA7D,oBAzBF,GAFF,GADF,CAkCD,CA7ED,CA+EA,cAAeR,CAAAA,iBAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport DatePicker from \"react-datepicker\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./CreateReservation.css\";\n\nconst CreateReservation = ({ restaurantName }) => {\n  const [date, setDate] = useState(new Date());\n  const [partySize, setpartySize] = useState(\"\");\n  const navigate = useNavigate();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [errorStatus, setErrorStatus] = useState(false);\n  const { getAccessTokenSilently } = useAuth0();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const accessToken = await getAccessTokenSilently();\n    setIsLoading(true);\n\n    const formPage = { date, partySize, restaurantName };\n\n    const response = await fetch(\"http://localhost:5001/reservations\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${accessToken}`,\n      },\n      body: JSON.stringify(formPage),\n    });\n    if (!response.ok) {\n      setIsError(true);\n      setErrorStatus(response.status);\n    } else {\n      setIsLoading(false);\n      navigate(\"/reservations\");\n    }\n  };\n  if (isError) {\n    return (\n      <>\n        <p>Error creating a reservation (error status {errorStatus})</p>\n        <Link to=\"/\" className=\"button\">\n          Return to Restaurants\n        </Link>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <h2 className=\"reserve-restaurant\">Reserve {restaurantName}</h2>\n      <form onSubmit={handleSubmit}>\n        <label className=\"form-label\" htmlFor=\"numberofguests\">\n          Number of guests\n        </label>\n        <input\n          type=\"number\"\n          id=\"numberofguests\"\n          min=\"0\"\n          className=\"form-input\"\n          required\n          value={partySize}\n          onChange={(e) => setpartySize(e.target.value)}\n        />\n        <label className=\"form-label\" htmlFor=\"date\">\n          Date\n        </label>\n        <DatePicker\n          className=\"form-input\"\n          id=\"date\"\n          selected={date}\n          onChange={(date) => setDate(date)}\n          minDate={new Date()}\n          showTimeSelect\n          dateFormat=\"Pp\"\n        />\n        <button className=\"create-reservations-submit-btn\" disabled={isLoading}>\n          Submit\n        </button>\n      </form>\n    </>\n  );\n};\n\nexport default CreateReservation;\n"]},"metadata":{},"sourceType":"module"}